<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>CourtEase - Edit Booking</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
</head>
<body class="bg-light">

<div class="toast-container position-fixed top-0 end-0 p-3">
  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      {% for category, message in messages %}
        <div class="toast text-bg-{{ category }} border-0" role="alert" aria-live="assertive" aria-atomic="true" data-bs-delay="2000">
          <div class="d-flex">
            <div class="toast-body">{{ message }}</div>
            <button type="button" class="btn-close me-2 m-auto" data-bs-dismiss="toast"></button>
          </div>
        </div>
      {% endfor %}
    {% endif %}
  {% endwith %}
</div>

<div class="container my-4">
  <a href="{{ url_for('booking.manage_bookings') }}" class="btn btn-secondary mb-3">â¬… Back to My Bookings</a>

  <div class="card shadow-sm">
    <div class="card-body">
      <h3 class="mb-3">Edit Booking</h3>

      <form method="POST" action="{{ url_for('booking.edit_booking', booking_id=booking.id) }}">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

           <div class="mb-3">
              <label for="court_id" class="form-label">Select Court</label>
              <select name="court_id" id="court_id" class="form-control" required>
               {% for court in courts %}
              <option value="{{ court.id }}" {% if court.id == booking.court_id %}selected{% endif %}>
              {{ court.court_name }} {{ court.location }}
               </option>
               {% endfor %}
               </select>
             </div>


        <div class="mb-3">
          <label for="date">Date</label>
          <input type="date" name="date" id="date" value="{{ booking.booking_date }}" class="form-control" required />
        </div>

       <div class="mb-3">
       <label for="start_time">Start Time</label>
       <input type="time" name="start_time" id="start_time"
       value="{{ booking.start_time_str }}" class="form-control" required />
       </div>

      <div class="mb-3">
      <label for="end_time">End Time</label>
      <input type="time" name="end_time" id="end_time"
       value="{{ booking.end_time_str }}" class="form-control" required />
      </div>


        <button type="submit" class="btn btn-success">Save Changes</button>
        <a href="{{ url_for('booking.manage_bookings') }}" class="btn btn-secondary ms-2">Cancel</a>
      </form>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", function(){
    document.querySelectorAll('.toast').forEach(el => new bootstrap.Toast(el).show());
  });
</script>
</body>
</html>
